{"version":3,"sources":["app.ts","environment.ts","main.ts","resources/index.ts","services/face-detector.ts","services/time-utilities.ts","resources/elements/camera-video.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {bindable} from \"aurelia-framework\";\nimport {CameraVideoCustomElement} from \"./resources/elements/camera-video\";\nimport {DetectedFace,FaceDetector,FaceDetectionMode} from \"./services/face-detector\";\nimport {getTimeStamp} from \"./services/time-utilities\";\n\nexport class App {\n  \n    cameraVideo : CameraVideoCustomElement;\n    faceDetector : FaceDetector;\n    faces : Array<DetectedFace>;\n    facesTimeStamp : number;\n\n    @bindable\n    mode : FaceDetectionMode = FaceDetectionMode.Close;\n\n    attached() : void {\n      this.cameraVideo.onProcessFrame = (canvas,ctx) => {\n        if(this.faceDetector){\n          this.faceDetector.processFrame(canvas,ctx);\n        }\n        if(this.faces){\n          this.onDrawFaces(canvas,ctx,this.faces);\n        }\n      };\n\n      this.cameraVideo.onStarted = (width,height) => {\n          this.createDetector(width,height);\n      };\n\n      this.cameraVideo.onStopped = () => {\n          this.destroyDetector();\n      };\n    }\n\n    start() : void {\n\n      this.stop();\n      this.cameraVideo.start();\n    }\n\n    stop() : void{\n\n      this.cameraVideo.stop();\n    }\n\n    modeChanged(newValue : FaceDetectionMode, oldValue: FaceDetectionMode) {\n      \n      if(this.faceDetector){\n        this.destroyDetector();\n        this.createDetector(this.cameraVideo.width,this.cameraVideo.height);\n      }\n    }\n\n    private destroyDetector() : void {\n      if(this.faceDetector){\n        this.faceDetector.dispose();\n        this.faceDetector = null;\n        this.faces = null;\n        this.facesTimeStamp = null;\n      }\n    }\n\n    private createDetector(width : number,height : number){\n      this.faceDetector = new FaceDetector(width,height,this.mode,faces => {\n         \n\n          this.onFacesDetected(faces);\n        });\n    }\n\n    private onFacesDetected(faces : Array<DetectedFace>) : void {\n        this.faces = faces;\n        this.facesTimeStamp = getTimeStamp();\n    }\n\n    private onDrawFaces(canvas: HTMLCanvasElement,ctx: CanvasRenderingContext2D,faces : Array<DetectedFace>) : void {\n\n       for(let f = 0; f < faces.length; ++f){\n         let face = faces[f];\n\n         for(let p = 0; p < face.points.length; ++p){\n           let point = face.points[p];\n\n           ctx.strokeStyle = face.color;\n           ctx.strokeRect(point.x-2,point.y-2,4,4);\n         }\n       }\n    }\n}\n","export default {\n  debug: false,\n  testing: false\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n(<any>Promise).config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n","\r\nimport {getTimeStamp} from \"./time-utilities\";\r\n\r\ndeclare var affdex : any;\r\n\r\nexport interface DetectedFacePoint {\r\n    x : number;\r\n    y : number;\r\n}\r\n\r\nexport interface DetectedFaceEmotion {\r\n\r\n    name : string;\r\n    value : number;\r\n}\r\n\r\nexport interface DetectedFace {\r\n\r\n    age: string;\r\n    ethnicity : string;\r\n    gender: string;\r\n    glasses : boolean;\r\n    dominantEmotion : string;\r\n    emotions: Array<DetectedFaceEmotion>;\r\n    engagement: number;\r\n    color : string;\r\n\r\n    points: Array<DetectedFacePoint>\r\n}\r\n\r\nexport enum FaceDetectionMode {\r\n\r\n    Close = 0,\r\n    Far = 1\r\n}\r\n\r\nexport class FaceDetector {\r\n\r\n    private detector : any;\r\n    private wasInitialized : boolean = false;\r\n    private initializationTimeStamp : number;\r\n\r\n    private faceColors : Array<string> = [\r\n        'blue',\r\n        'red',\r\n        'green',\r\n        'yellow',\r\n        'white',\r\n        'magenta',\r\n    ];\r\n\r\n    private onInitializeSuccess : () => void = () => {\r\n        console.log('FaceDetector initialized');\r\n\r\n        this.wasInitialized = true;\r\n        this.initializationTimeStamp = getTimeStamp();\r\n    };\r\n\r\n    private onInitializeFailure : () => void = () => {\r\n        console.error('FaceDetector initialization failure');\r\n    };\r\n\r\n    private onImageResultsSuccess : (faces : any,image : any,timestamp : any) => void = (faces,image,timestamp) => {\r\n\r\n        let result = new Array<DetectedFace>();\r\n\r\n        if(faces && faces.length > 0){\r\n            for(let i = 0; i < faces.length; ++i) {    \r\n                console.log(faces[i]);            \r\n                result.push(this.convertFace(faces[i],i));\r\n            }\r\n\r\n            if(this.resultCallback){\r\n                this.resultCallback(result);\r\n            }\r\n        }\r\n    }\r\n\r\n    private onImageResultsFailure : (image : any,timestamp : any,error : any) => void = (image,timestamp,error) => {\r\n        console.error(\"FaceDetection error: \" + error);\r\n    };\r\n\r\n    constructor(width:number,height:number,mode:FaceDetectionMode,private resultCallback : (faces: Array<DetectedFace>) => void){\r\n\r\n        this.detector = new affdex.FrameDetector( mode );\r\n        this.detector.addEventListener('onInitializeSuccess',this.onInitializeSuccess);\r\n        this.detector.addEventListener('onInitializeFailure',this.onInitializeFailure);\r\n        this.detector.addEventListener('onImageResultsSuccess',this.onImageResultsSuccess);\r\n        this.detector.addEventListener('onImageResultsFailure',this.onImageResultsFailure);\r\n\r\n        this.detector.detectAllEmotions();\r\n        this.detector.detectAllAppearance();\r\n        this.detector.detectAllExpressions();\r\n        this.detector.detectAllEmojis();\r\n\r\n        this.detector.start();\r\n    }\r\n\r\n     processFrame(canvas : HTMLCanvasElement,ctx : CanvasRenderingContext2D) : void {\r\n\r\n        if(this.wasInitialized){\r\n        \r\n            let imageData = ctx.getImageData(0, 0, canvas.width,canvas.height);        \r\n            let deltaTime = getTimeStamp() - this.initializationTimeStamp;\r\n\r\n            this.detector.process(imageData, deltaTime);\r\n        }\r\n    }\r\n\r\n    dispose() : void {\r\n        this.detector.stop();\r\n\r\n        this.detector.removeEventListener('onInitializeSuccess',this.onInitializeSuccess);\r\n        this.detector.removeEventListener('onInitializeFailure',this.onInitializeFailure);\r\n        this.detector.removeEventListener('onImageResultsSuccess',this.onImageResultsSuccess);\r\n        this.detector.removeEventListener('onImageResultsFailure',this.onImageResultsFailure);\r\n    }\r\n\r\n    reset() : void {\r\n        this.detector.reset();\r\n        this.initializationTimeStamp = getTimeStamp();\r\n    }\r\n\r\n     private convertFacePoints(face : any) : Array<DetectedFacePoint> {\r\n\r\n        let result = new Array<DetectedFacePoint>();\r\n\r\n        for(let i in face.featurePoints){\r\n            result.push({\r\n                x: face.featurePoints[i].x,\r\n                y: face.featurePoints[i].y\r\n            })\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private convertFace(face : any,index : number) : DetectedFace {\r\n\r\n        let dominantEmotion = null;\r\n        let dominantEmotionValue = -1000000;\r\n\r\n        for(let emotion in face.emotions){\r\n            if(emotion !== 'valence' && emotion  !== 'engagement'){\r\n\r\n                let emotionValue = face.emotions[emotion];\r\n\r\n                if(dominantEmotion === null ){\r\n                    if(emotionValue > 2.0){\r\n                        dominantEmotion = emotion;\r\n                        dominantEmotionValue = emotionValue;\r\n                    }\r\n                }\r\n                else {\r\n                    if(emotionValue > dominantEmotionValue) {\r\n                        dominantEmotion = emotion;\r\n                        dominantEmotionValue = emotionValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        let emotions = new Array<DetectedFaceEmotion>();\r\n\r\n        for(let emotion in face.emotions){\r\n             if(emotion !== 'valence' && emotion  !== 'engagement'){\r\n\r\n                emotions.push({\r\n                    name: emotion,\r\n                    value: Math.round(face.emotions[emotion] * 100) / 100\r\n                })\r\n            }\r\n        }\r\n\r\n        let color = index < this.faceColors.length ? this.faceColors[index] : this.faceColors[0];\r\n\r\n        return {\r\n            age: face.appearance.age,\r\n            gender: face.appearance.gender,\r\n            ethnicity: face.appearance.ethnicity,\r\n            glasses: face.appearance.glasses === 'Yes' ? true : false,\r\n            points : this.convertFacePoints(face),\r\n            dominantEmotion: dominantEmotion,\r\n            emotions: emotions,\r\n            engagement :  Math.round(face.emotions.engagement * 100) / 100, \r\n            color: color\r\n        }\r\n    }\r\n}","export function getTimeStamp() : number {\r\n\r\n    return (new Date()).getTime() / 1000;\r\n}","import {customElement,bindable, bindingMode} from 'aurelia-framework';\r\nimport {DOM} from 'aurelia-pal';\r\n\r\n@customElement(\"camera-video\")\r\nexport class CameraVideoCustomElement {\r\n\r\n    videoElement : HTMLVideoElement;\r\n    canvasElement : HTMLCanvasElement;\r\n    canvasContext : CanvasRenderingContext2D;\r\n\r\n    @bindable\r\n    frameRate : number = 30.0;\r\n\r\n    @bindable\r\n    videoWidth : number = 320;\r\n\r\n    @bindable\r\n    videoHeight : number = 200;\r\n\r\n    get width() : number {\r\n        return this.canvasElement.width;\r\n    }\r\n\r\n    get height() : number {\r\n        return this.canvasElement.height;\r\n    }\r\n\r\n    onStarted : (width : number,height : number) => void;\r\n    onStopped : () => void;\r\n    onProcessFrame : (canvas : HTMLCanvasElement,canvasContext : CanvasRenderingContext2D) => void;\r\n\r\n    private playListener : EventListenerOrEventListenerObject;1\r\n\r\n    constructor() {\r\n        this.playListener = () => this.onPlay();\r\n    }\r\n\r\n    attached() : void {\r\n        this.videoElement.addEventListener('play',this.playListener);\r\n        this.canvasContext = this.canvasElement.getContext('2d');\r\n    }\r\n\r\n    detached() : void {\r\n        this.videoElement.removeEventListener('play',this.playListener);\r\n    }\r\n\r\n    start() : void {\r\n\r\n        this.stop();\r\n\r\n        let options : MediaStreamConstraints = {\r\n            video: {\r\n                width: this.videoWidth,\r\n                height: this.videoHeight,\r\n                frameRate: this.frameRate\r\n            }\r\n        };\r\n\r\n        navigator.getUserMedia(options,result => {\r\n            this.videoElement.srcObject = result;\r\n            this.videoElement.onloadedmetadata = e => {\r\n             \r\n                this.videoElement.play();\r\n            };\r\n        },error => {\r\n\r\n        });\r\n    }\r\n\r\n    stop() : void {\r\n\r\n        if(this.videoElement.srcObject){\r\n            this.videoElement.srcObject.getTracks()[0].stop();\r\n            this.videoElement.srcObject = null;\r\n\r\n            this.canvasContext.fillStyle = 'black';\r\n            this.canvasContext.fillRect(0,0,this.canvasElement.width,this.canvasElement.height);\r\n\r\n            if(this.onStopped){\r\n                this.onStopped();\r\n            }\r\n        }\r\n    }\r\n\r\n    private onFrame() : void {\r\n\r\n        if(this.videoElement && !this.videoElement.paused && !this.videoElement.ended){\r\n\r\n            this.canvasContext.drawImage(this.videoElement,0,0);\r\n\r\n            if(this.onProcessFrame){\r\n                this.onProcessFrame(this.canvasElement,this.canvasContext);\r\n            }\r\n\r\n            setTimeout(() => this.onFrame(),1000 / this.frameRate);\r\n        }\r\n    }\r\n\r\n    private onPlay() : void {\r\n\r\n        this.canvasElement.width = this.videoElement.videoWidth;\r\n        this.canvasElement.height = this.videoElement.videoHeight;\r\n\r\n        if(this.onStarted) {\r\n            this.onStarted(this.videoElement.videoWidth,this.videoElement.videoHeight);\r\n        }\r\n        this.onFrame();\r\n    }\r\n}"],"sourceRoot":"../src"}